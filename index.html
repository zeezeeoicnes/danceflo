<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dance Flo - Graffiti Mix</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Outfit:wght@900&display=swap" rel="stylesheet">
    <style>
        :root {
            --fnf-pink: #ff00ff;
            --fnf-cyan: #00ffff;
            --fnf-yellow: #fff000;
            --note-left: #c24b99;
            --note-down: #00ffff;
            --note-up: #12fa05;
            --note-right: #f9393f;
        }

        body {
            margin: 0;
            overflow: hidden;
            background-color: #080808;
            font-family: 'Outfit', sans-serif;
            color: white;
            user-select: none;
            touch-action: none;
        }

        canvas { position: absolute; top: 0; left: 0; z-index: 1; }

        .ui-layer {
            position: absolute;
            inset: 0;
            z-index: 10;
            pointer-events: none;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .ui-layer > * { pointer-events: auto; }

        .screen { display: none; width: 100%; height: 100%; position: relative; }
        .screen.active { display: flex; flex-direction: column; }

        .logo-bop {
            animation: logo-bop 0.4s infinite alternate cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-family: 'Permanent Marker', cursive;
            filter: drop-shadow(0 0 15px var(--fnf-pink));
        }
        @keyframes logo-bop {
            from { transform: scale(1) rotate(-3deg); }
            to { transform: scale(1.15) rotate(3deg); }
        }

        .street-menu-btn {
            font-family: 'Permanent Marker', cursive;
            font-size: 5rem;
            cursor: pointer;
            text-shadow: 8px 8px 0px #000;
            transition: all 0.2s;
            position: relative;
            padding: 0 40px;
            color: white;
            border: none;
            background: none;
        }
        .street-menu-btn:hover {
            transform: scale(1.1) translateX(15px) rotate(-1deg);
            color: var(--fnf-cyan);
            text-shadow: 10px 10px 0px var(--fnf-pink);
        }

        .osu-container {
            display: flex; width: 100%; height: 100%;
            background: linear-gradient(90deg, rgba(0,0,0,0.9) 0%, transparent 100%);
        }
        .song-preview-side { width: 40%; display: flex; flex-direction: column; justify-content: center; padding: 60px; }
        .song-list-side { width: 60%; overflow-y: auto; padding: 120px 40px; scrollbar-width: none; }
        
        .osu-card {
            background: rgba(30,30,30,0.9);
            margin-bottom: 20px;
            padding: 25px 50px;
            border-right: 20px solid transparent;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: perspective(1000px) rotateY(-10deg);
            display: flex; flex-direction: column;
            align-items: flex-end;
            text-align: right;
            border: 2px solid rgba(255,255,255,0.1);
        }
        .osu-card.active {
            background: #fff; color: #000;
            border-right: 20px solid var(--fnf-pink);
            transform: perspective(1000px) rotateY(-20deg) scale(1.1) translateX(-40px);
            box-shadow: 0 0 50px rgba(255,0,255,0.3);
        }

        .highway { position: absolute; top: 0; left: 50%; transform: translateX(-50%); height: 100%; display: flex; gap: 25px; }
        .lane { width: 110px; height: 100%; position: relative; background: rgba(255,255,255,0.03); pointer-events: auto; }
        
        .receptor {
            position: absolute; bottom: 80px; width: 100px; height: 100px;
            border: 6px solid rgba(255,255,255,0.2); border-radius: 15px;
            display: flex; align-items: center; justify-content: center;
            font-size: 60px; left: 5px; transition: transform 0.05s;
            pointer-events: none;
        }
        .receptor.hit { transform: scale(0.8); border-color: #fff; background: rgba(255,255,255,0.3); }

        .note { 
            position: absolute; width: 100px; height: 100px; border-radius: 15px;
            display: flex; align-items: center; justify-content: center; font-size: 60px;
            left: 5px; box-shadow: 0 10px 0px rgba(0,0,0,0.4); font-weight: bold;
            pointer-events: none; z-index: 50;
        }

        .judgement {
            position: absolute; top: 25%; left: 50%; transform: translate(-50%, -50%);
            font-family: 'Permanent Marker', cursive; font-size: 8rem; pointer-events: none; opacity: 0;
            text-shadow: 10px 10px 0px #000; -webkit-text-stroke: 3px white;
        }
        .animate-judgement { animation: graffiti-bounce 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.5) forwards; }
        @keyframes graffiti-bounce {
            0% { opacity: 0; transform: translate(-50%, -20%) scale(0.2) rotate(-20deg); }
            40% { opacity: 1; transform: translate(-50%, -50%) scale(1.2) rotate(10deg); }
            100% { opacity: 0; transform: translate(-50%, -80%) scale(1) rotate(0deg); }
        }

        .pause-overlay {
            position: absolute; inset: 0; background: rgba(0,0,0,0.8);
            z-index: 100; display: none; flex-direction: column; justify-content: center; align-items: center;
            backdrop-filter: blur(8px);
        }

        .rank-badge {
            font-family: 'Permanent Marker', cursive; font-size: 15rem; line-height: 1;
            text-shadow: 15px 15px 0px var(--fnf-pink);
            animation: rank-appear 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        #loading-overlay {
            position: fixed; inset: 0; background: black; z-index: 1000; display: none;
            flex-direction: column; justify-content: center; align-items: center; 
        }
    </style>
</head>
<body class="bg-black">

    <div id="loading-overlay">
        <div class="font-['Permanent_Marker'] text-6xl text-white animate-pulse">LOADING STREETS...</div>
    </div>

    <canvas id="bg-canvas"></canvas>

    <div class="ui-layer">
        <!-- Title Screen -->
        <div id="screen-title" class="screen active justify-center items-center cursor-pointer" onclick="app.initAudioAndStart()">
            <div class="logo-bop text-[15rem] leading-none mb-10 text-pink-500 text-center" style="text-shadow: 15px 15px 0 #fff">DANCE<br>FLO</div>
            <div class="font-['Permanent_Marker'] text-5xl text-white">CLICK TO START</div>
        </div>

        <!-- Main Menu -->
        <div id="screen-main" class="screen items-start justify-center pl-24">
            <div class="flex flex-col items-start space-y-2">
                <button class="street-menu-btn" onclick="app.showScreen('screen-select')">PLAY</button>
                <button class="street-menu-btn" onclick="app.showScreen('screen-main')">SETTINGS</button>
                <button class="street-menu-btn" onclick="window.location.reload()">EXIT</button>
            </div>
        </div>

        <!-- Song Select -->
        <div id="screen-select" class="screen">
            <div class="osu-container">
                <div class="song-preview-side">
                    <div id="preview-art" class="w-full aspect-square bg-white/5 rounded-3xl mb-8 flex items-center justify-center overflow-hidden border-8 border-white transform rotate-[-2deg]">
                        <div class="text-[12rem] opacity-30">üî•</div>
                    </div>
                    <h2 id="preview-title" class="text-7xl font-black italic uppercase leading-none mb-2" style="text-shadow: 5px 5px 0 var(--fnf-pink)">SONG TITLE</h2>
                    <p id="preview-artist" class="text-3xl text-cyan-400 mb-10 font-bold tracking-tighter">ARTIST NAME</p>
                    <button id="btn-start-game" class="bg-white text-black hover:bg-pink-500 hover:text-white p-8 text-5xl font-black skew-x-[-12deg] transition-all transform hover:scale-110" onclick="app.startGame()">LETS GO!</button>
                    <button class="mt-8 text-white/40 text-2xl font-bold hover:text-white transition-colors" onclick="app.showScreen('screen-main')">BACK</button>
                </div>
                <div class="song-list-side" id="song-list"></div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="screen-game" class="screen">
            <div id="judgement" class="judgement">PERFECT</div>
            
            <button class="absolute top-10 right-10 z-[60] bg-white/10 hover:bg-white/20 p-4 rounded-xl backdrop-blur-md border border-white/20 transition-all pointer-events-auto" onclick="app.togglePause()">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
            </button>

            <div class="absolute top-10 left-10 text-white">
                <div class="text-2xl font-bold opacity-50 uppercase">Accuracy</div>
                <div id="game-acc-val" class="text-6xl font-black italic">100.0%</div>
            </div>
            <div class="absolute bottom-10 right-10 text-white text-right">
                <div class="text-2xl font-bold opacity-50 uppercase">Score</div>
                <div id="score-val" class="text-6xl font-black italic text-cyan-400">0</div>
            </div>

            <div class="highway">
                <div class="lane" id="lane-0" onpointerdown="app.handleInput(0)" onpointerup="app.releaseInput(0)">
                    <div class="receptor" id="receptor-0" style="color:var(--note-left)">‚Üê</div>
                </div>
                <div class="lane" id="lane-1" onpointerdown="app.handleInput(1)" onpointerup="app.releaseInput(1)">
                    <div class="receptor" id="receptor-1" style="color:var(--note-down)">‚Üì</div>
                </div>
                <div class="lane" id="lane-2" onpointerdown="app.handleInput(2)" onpointerup="app.releaseInput(2)">
                    <div class="receptor" id="receptor-2" style="color:var(--note-up)">‚Üë</div>
                </div>
                <div class="lane" id="lane-3" onpointerdown="app.handleInput(3)" onpointerup="app.releaseInput(3)">
                    <div class="receptor" id="receptor-3" style="color:var(--note-right)">‚Üí</div>
                </div>
            </div>

            <div id="pause-menu" class="pause-overlay">
                <h2 class="font-['Permanent_Marker'] text-9xl text-white mb-12" style="text-shadow: 10px 10px 0 var(--fnf-pink)">PAUSED</h2>
                <div class="flex flex-col space-y-4">
                    <button class="street-menu-btn" onclick="app.togglePause()">CONTINUE</button>
                    <button class="street-menu-btn" onclick="app.startGame()">RESTART</button>
                    <button class="street-menu-btn text-3xl" onclick="app.quitGame()">QUIT</button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="screen-results" class="screen bg-black/95 p-20 flex-row items-center justify-between">
            <div class="w-1/2 flex flex-col items-start">
                <h1 class="font-['Permanent_Marker'] text-9xl text-white mb-8" style="text-shadow: 10px 10px 0 var(--fnf-pink)">FINISH!</h1>
                <div class="space-y-4 w-full max-w-lg">
                    <div class="flex justify-between items-center bg-white/5 p-6 border-l-8 border-[var(--fnf-cyan)]"><span class="text-4xl font-black">PERFECT</span><span id="res-perfect" class="text-6xl font-black text-[var(--fnf-cyan)]">0</span></div>
                    <div class="flex justify-between items-center bg-white/5 p-6 border-l-8 border-[var(--fnf-yellow)]"><span class="text-4xl font-black">GOOD</span><span id="res-good" class="text-6xl font-black text-[var(--fnf-yellow)]">0</span></div>
                    <div class="flex justify-between items-center bg-white/5 p-6 border-l-8 border-orange-500"><span class="text-4xl font-black">BAD</span><span id="res-bad" class="text-6xl font-black text-orange-500">0</span></div>
                    <div class="flex justify-between items-center bg-white/5 p-6 border-l-8 border-gray-600"><span class="text-4xl font-black text-gray-500">MISS</span><span id="res-miss" class="text-6xl font-black text-gray-500">0</span></div>
                </div>
                <div class="mt-12 flex space-x-12 items-end">
                    <div><div class="text-2xl font-bold text-white/40 uppercase">Score</div><div id="res-score" class="text-8xl font-black italic">0</div></div>
                    <div><div class="text-2xl font-bold text-white/40 uppercase">Accuracy</div><div id="res-acc" class="text-8xl font-black text-[var(--fnf-pink)] italic">0%</div></div>
                </div>
                <div class="flex space-x-8 mt-16">
                    <button class="street-menu-btn text-4xl" onclick="app.startGame()">REPLAY</button>
                    <button class="street-menu-btn text-4xl" onclick="app.showScreen('screen-select')">MENU</button>
                </div>
            </div>
            <div class="w-1/2 flex flex-col items-center justify-center">
                <div id="res-rank" class="rank-badge">S</div>
                <div id="res-msg" class="text-3xl font-bold italic text-white/60 text-center mt-10">LEGENDARY PERFORMANCE</div>
            </div>
        </div>
    </div>

    <script>
        const SONGS = [
            { 
                title: "TEACH ME DOUGIE", 
                artist: "BOUDHA CREW REMIX", 
                bpm: 85, 
                color: "#ff00ff",
                url: "https://dl.dropboxusercontent.com/scl/fi/wub4nwe9v57udxwf7dojc/Teach-Me-How-to-Dougie-Steelies-Of-Boudha-Crew-Dance-Cover-Choreography-by-MannexManhattan.mp3?rlkey=spzt7op2ctq2f5ct2u7gy2h35"
            }
        ];

        class Game {
            constructor() {
                this.canvas = document.getElementById('bg-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.selectedIndex = 0;
                this.isPlaying = false;
                this.isPaused = false;
                this.score = 0;
                this.stats = { perfect: 0, good: 0, bad: 0, miss: 0 };
                this.notes = [];
                this.startTime = 0;
                this.pauseTime = 0;
                this.audioCtx = null;
                this.analyser = null;
                this.dataArray = null;
                this.currentAudio = null;
                this.source = null;
                this.userActivated = false;

                this.initBase();
            }

            initBase() {
                this.resize();
                window.addEventListener('resize', () => this.resize());
                this.renderSongs();
                
                const keyMap = { 'ArrowLeft': 0, 'ArrowDown': 1, 'ArrowUp': 2, 'ArrowRight': 3, 'Escape': 'pause' };
                window.addEventListener('keydown', (e) => {
                    if (keyMap[e.key] === 'pause') { if (this.isPlaying) this.togglePause(); return; }
                    if (this.isPlaying && !this.isPaused && keyMap[e.key] !== undefined && !e.repeat) {
                        e.preventDefault(); this.handleInput(keyMap[e.key]);
                    }
                });
                window.addEventListener('keyup', (e) => {
                    if (this.isPlaying && keyMap[e.key] !== undefined) this.releaseInput(keyMap[e.key]);
                });

                this.bgLoop();
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }

            async initAudioAndStart() {
                if (this.userActivated) return;
                
                try {
                    this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                    if (this.audioCtx.state === 'suspended') await this.audioCtx.resume();
                    
                    this.analyser = this.audioCtx.createAnalyser();
                    this.analyser.fftSize = 128;
                    this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);
                    
                    this.userActivated = true;
                    this.showScreen('screen-main');
                } catch (e) {
                    console.error("Audio Context initialization failed", e);
                }
            }

            showScreen(id) {
                this.isPaused = false;
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                const target = document.getElementById(id);
                if (target) target.classList.add('active');
            }

            renderSongs() {
                const list = document.getElementById('song-list');
                if (!list) return;
                list.innerHTML = SONGS.map((s, i) => `
                    <div class="osu-card ${i === 0 ? 'active' : ''}" id="song-${i}" onclick="app.selectSong(${i})">
                        <div class="title">${s.title}</div>
                        <div class="artist">BY ${s.artist}</div>
                    </div>
                `).join('');
                this.updatePreview();
            }

            selectSong(i) {
                this.selectedIndex = i;
                document.querySelectorAll('.osu-card').forEach((c, idx) => c.classList.toggle('active', idx === i));
                this.updatePreview();
                this.playSfx(150, 'sine');
            }

            updatePreview() {
                const s = SONGS[this.selectedIndex];
                const title = document.getElementById('preview-title');
                const artist = document.getElementById('preview-artist');
                const art = document.getElementById('preview-art');
                if (title) title.innerText = s.title;
                if (artist) artist.innerText = s.artist;
                if (art) art.style.borderColor = s.color;
            }

            playSfx(freq, type = 'square') {
                if(!this.audioCtx || this.isPaused) return;
                const osc = this.audioCtx.createOscillator();
                const g = this.audioCtx.createGain();
                osc.type = type; osc.frequency.value = freq;
                g.gain.setValueAtTime(0.05, this.audioCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.001, this.audioCtx.currentTime + 0.1);
                osc.connect(g); g.connect(this.audioCtx.destination);
                osc.start(); osc.stop(this.audioCtx.currentTime + 0.1);
            }

            togglePause() {
                if (!this.currentAudio) return;
                this.isPaused = !this.isPaused;
                const menu = document.getElementById('pause-menu');
                if (this.isPaused) {
                    this.currentAudio.pause();
                    this.pauseTime = performance.now();
                    menu.style.display = 'flex';
                } else {
                    this.currentAudio.play();
                    this.startTime += (performance.now() - this.pauseTime);
                    menu.style.display = 'none';
                    this.gameLoop();
                }
            }

            quitGame() {
                this.isPlaying = false;
                if (this.currentAudio) {
                    this.currentAudio.pause();
                    this.currentAudio.src = "";
                }
                this.showScreen('screen-select');
            }

            async startGame() {
                const song = SONGS[this.selectedIndex];
                const overlay = document.getElementById('loading-overlay');
                if (overlay) overlay.style.display = 'flex';

                try {
                    if (this.currentAudio) {
                        this.currentAudio.pause();
                        this.currentAudio.src = "";
                        this.currentAudio = null;
                    }

                    this.currentAudio = new Audio();
                    this.currentAudio.crossOrigin = "anonymous";
                    
                    await new Promise((resolve, reject) => {
                        this.currentAudio.addEventListener('canplaythrough', resolve, { once: true });
                        this.currentAudio.addEventListener('error', reject, { once: true });
                        this.currentAudio.src = song.url;
                        this.currentAudio.load();
                        setTimeout(resolve, 10000); 
                    });

                    if (this.audioCtx && !this.source) {
                        this.source = this.audioCtx.createMediaElementSource(this.currentAudio);
                        this.source.connect(this.analyser);
                        this.analyser.connect(this.audioCtx.destination);
                    }

                    if (overlay) overlay.style.display = 'none';

                    this.isPlaying = true;
                    this.isPaused = false;
                    this.score = 0; 
                    this.stats = { perfect: 0, good: 0, bad: 0, miss: 0 };
                    this.notes = [];
                    document.getElementById('pause-menu').style.display = 'none';

                    this.showScreen('screen-game');
                    this.updateUI();

                    const beatGap = (60 / song.bpm) * 1000;
                    for(let i = 0; i < 500; i++) {
                        this.notes.push({
                            lane: Math.floor(Math.random() * 4),
                            time: 3000 + (i * beatGap), 
                            hit: false, missed: false, el: null
                        });
                    }

                    this.startTime = performance.now();
                    this.currentAudio.play();
                    this.gameLoop();

                } catch (e) {
                    console.error("Audio play failed", e);
                    if (overlay) overlay.style.display = 'none';
                }
            }

            handleInput(lane) {
                if (!this.isPlaying || this.isPaused) return;
                const r = document.getElementById(`receptor-${lane}`);
                if (r) r.classList.add('hit');
                
                const now = performance.now() - this.startTime;
                const note = this.notes.find(n => !n.hit && !n.missed && n.lane === lane && Math.abs(n.time - now) < 200);

                if (note) {
                    const diff = Math.abs(note.time - now);
                    let judge, color;
                    if (diff < 70) { judge = "PERFECT"; color = "var(--fnf-cyan)"; this.stats.perfect++; this.score += 500; }
                    else if (diff < 140) { judge = "GOOD"; color = "var(--fnf-yellow)"; this.stats.good++; this.score += 250; }
                    else { judge = "BAD"; color = "#ff4444"; this.stats.bad++; this.score += 50; }

                    note.hit = true;
                    if (note.el) { note.el.remove(); note.el = null; }
                    this.showJudgement(judge, color);
                    this.playSfx(300 + (lane * 50));
                }
                this.updateUI();
            }

            releaseInput(lane) {
                const r = document.getElementById(`receptor-${lane}`);
                if (r) r.classList.remove('hit');
            }

            showJudgement(txt, color) {
                const j = document.getElementById('judgement');
                if (!j) return;
                j.innerText = txt;
                j.style.color = color;
                j.classList.remove('animate-judgement');
                void j.offsetWidth;
                j.classList.add('animate-judgement');
            }

            getAccuracy() {
                const total = this.stats.perfect + this.stats.good + this.stats.bad + this.stats.miss;
                if (total === 0) return 100.0;
                return (((this.stats.perfect * 1) + (this.stats.good * 0.7) + (this.stats.bad * 0.3)) / total) * 100;
            }

            updateUI() {
                const scoreVal = document.getElementById('score-val');
                const accVal = document.getElementById('game-acc-val');
                if (scoreVal) scoreVal.innerText = this.score;
                if (accVal) accVal.innerText = this.getAccuracy().toFixed(1) + "%";
            }

            bgLoop() {
                this.ctx.fillStyle = 'rgba(8, 8, 8, 0.2)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                if(this.analyser && !this.isPaused) {
                    this.analyser.getByteFrequencyData(this.dataArray);
                    const color = SONGS[this.selectedIndex]?.color || '#ff00ff';
                    this.ctx.strokeStyle = color;
                    this.ctx.lineWidth = 4;
                    this.ctx.beginPath();
                    const slice = this.canvas.width / this.dataArray.length;
                    let x = 0;
                    for(let i=0; i<this.dataArray.length; i++) {
                        const h = (this.dataArray[i] / 255) * 400;
                        const y = this.canvas.height - h;
                        if(i === 0) this.ctx.moveTo(x, y); else this.ctx.lineTo(x, y);
                        x += slice;
                    }
                    this.ctx.stroke();
                }
                requestAnimationFrame(() => this.bgLoop());
            }

            gameLoop() {
                if(!this.isPlaying || this.isPaused) return;
                const now = performance.now() - this.startTime;
                const receptorY = this.canvas.height - 180;
                const speed = 0.85;

                this.notes.forEach(n => {
                    if(n.hit || n.missed) return;
                    const rel = n.time - now;
                    const y = receptorY - (rel * speed);

                    if(!n.el && y > -150 && y < this.canvas.height) {
                        n.el = document.createElement('div');
                        n.el.className = 'note';
                        n.el.innerText = ['‚Üê', '‚Üì', '‚Üë', '‚Üí'][n.lane];
                        n.el.style.backgroundColor = ['var(--note-left)', 'var(--note-down)', 'var(--note-up)', 'var(--note-right)'][n.lane];
                        document.getElementById(`lane-${n.lane}`).appendChild(n.el);
                    }
                    if(n.el) n.el.style.top = y + 'px';

                    if(rel < -180) {
                        n.missed = true;
                        this.stats.miss++;
                        if(n.el) { n.el.remove(); n.el = null; }
                        this.showJudgement("MISS", "#555555");
                        this.updateUI();
                    }
                });

                if (this.currentAudio && this.currentAudio.ended) {
                    this.endGame();
                } else {
                    requestAnimationFrame(() => this.gameLoop());
                }
            }

            endGame() {
                if (!this.isPlaying) return;
                this.isPlaying = false;
                this.showResults();
            }

            showResults() {
                document.getElementById('res-perfect').innerText = this.stats.perfect;
                document.getElementById('res-good').innerText = this.stats.good;
                document.getElementById('res-bad').innerText = this.stats.bad;
                document.getElementById('res-miss').innerText = this.stats.miss;
                document.getElementById('res-score').innerText = this.score;
                const acc = this.getAccuracy();
                document.getElementById('res-acc').innerText = acc.toFixed(1) + "%";

                let rank = "F", msg = "TRY AGAIN!";
                if (acc > 98) { rank = "S"; msg = "ABSOLUTE LEGEND!"; }
                else if (acc > 90) { rank = "A"; msg = "STREET MASTER!"; }
                else if (acc > 75) { rank = "B"; msg = "DOING GREAT!"; }
                else if (acc > 50) { rank = "C"; msg = "STREET DANCER"; }
                document.getElementById('res-rank').innerText = rank;
                document.getElementById('res-msg').innerText = msg;
                this.showScreen('screen-results');
            }
        }

        const app = new Game();
    </script>
</body>
</html>
